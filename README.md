from django.contrib.auth.models import User
from NewsPortal.models import *
user1 = User.objects.create_user('User1')
user3 = User.objects.create_user('User3')
user2 = User.objects.create_user('User2')
author1 = Author.objects.create(user=user1)
author2 = Author.objects.create(user=user2)
sport = Category.objects.create(name='Спорт')
cinema = Category.objects.create(name='Кино')
books = Category.objects.create(name='Книги')
policy = Category.objects.create(name='Политика')
p1 = Post.objects.create(title='Статья1', content='Вот так статья!', type='A', author=author1)
p2 = Post.objects.create(title='Статья2', content='Так себе статья!', type='A', author=author2)
n1 = Post.objects.create(title='Новость', content='Статей больше не будет!', type='N', author=author2)
p1.categories.add(sport)
p1.categories.add(cinema)
p2.categories.add(books)
n1.categories.add(policy)
comment1 = Comment.objects.create(content='Автор жжот!', post=p1, user=user3)
comment2 = Comment.objects.create(content='То ещё чтиво', post=p1, user=user2)
comment3 = Comment.objects.create(content='Жалко потраченного времени', post=p2, user=user1)
comment4 = Comment.objects.create(content='Приплыли', post=n1, user=user1)
p1.like()
p1.like()
p1.like()
p1.like()
p1.dislike()
p2.dislike()
n1.dislike()
comment1.like()
comment2.dislike()
comment3.like()
comment3.like()
comment4.dislike()
comment4.dislike()
author1.update_rating()
author2.update_rating()
Author.objects.all().order_by('-rating').first().user.username
best_post = Post.objects.all().order_by('-rating').first()
best_post.creation_date.strftime('%d.%m.%y %H:%M:%S'), best_post.author.user.username, best_post.rating, best_post.title, best_post.preview()
comments = best_post.comment_set.all()
[(x.creation_date.strftime('%d.%m.%y %H:%M:%S'), x.user.username, x.rating, x.content) for x in comments]
